
### 메모리 관리 배경

- 각각의 프로세스는 독립된 메모리 영역을 할당받고, 운영체제 혹은 다른 프로세스의 메모리 영역에 접근할 수 없는 제한이 걸려 있습니다.
- 운영체제는 운영체제 메모리 영역과 사용자 메모리 영역의 접근에 제약을 받지 않는다.


### Swapping

- 메모리 관리를 위해 사용되는 기법. 
- 표준 Swapping 방식으로는, 멀티 프로세스 환경에서 RR과 같은 CPU 스케쥴링 시 CPU 할당 시간이 끝난 프로세스의 메모리를 보조 기억장치(하드디스크 등...)로 보내고 다른 프로세스를 메모리에 적재하는 과정을 Swapping이라고 합니다.
- 주 기억장치 (RAM)으로 프로세스를 불러오는 과정을 Swap In, 보조 기억장치로 내보내는 과정을 Swap Out 이라고 한다. Swap 과정은 큰 디스크 전송 시간이 필요하기 때문에 현재에는 메모리 공간이 부족할 때만 Swapping이 시작됩니다.


### Fragmentation (단편화)

- 정의 : 프로세스들이 메모리에 적재되고 제거되는 일이 반복되다 보면, 프로세스들이 차지하는 메모리 틈 사이에 사용하지 못할 만큼의 작은 자유 공간들이 늘어나게 되는데, 이것이 단편화의 개념입니다.

단편화의 종류
- 외부 단편화 : 프로세스가 점유하는 메모리 공간 사이에 남는 부분들.
- 내부 단편화 : 프로세스가 점유하는 메모리 공간 내에 남는 부분들

외부 단편화를 해소하기 위해 프로세스가 사용하는 공간을 한쪽으로 몰아 free영역을 확보하는 압축 작업을 진행할 수 있으나 작업 효율이 좋지 않습니다.


### Paging 기법

정의 : 하나의 프로세스가 사용하는 메모리 공간을 물리적인 단위 크기인 페이지로 나눠 메모리에 적재하는 메모리 관리 방법입니다. 

동작 방식
- 물리 메모리는 프레임이라는 고정 크기로 분할하고, 논리 메모리는 페이지라는 고정 크기의 블록 단위로 분할합니다. 
- 이후 프로세스가 사용해야 하는 메모리 영역을 여러 개의 페이지로 나누어 논리 메모리에서 관리하고, 이 개별 페이지들은 필요에 의해 물리 메모리 영역의 프레임에 순서와 상관 없이 매핑되어 적재됩니다.

장단점
- 장점
	- 페이징 기법을 사용함으로써 논리 메모리에 저장된 페이지가 물리 메모리 프레임에 매핑될 때 순서에 상관 없이 적재될 수 있고, 물리 메모리에 남은 프레임에 적절하게 배치되어 적재되기 때문에 외부 단편화 현상을 해결할 수 있습니다.
- 단점
	- 페이징 기법을 사용하게 되면 오히려 내부 단편화는 늘어나게 된다는 단점이 생깁니다. 프로세스가 점유해야 하는 메모리 영역이 항상 페이지 단위로 딱 떨어지는 것이 아니기 때문에 마지막 페이지에는 내부적으로 남는 공간이 생겨 프레임에 매핑되었을 때 내부 단편화 현상이 발생할 수 밖에 없습니다. 



### Segmentation 기법

정의 : 하나의 프로세스가 사용하는 메모리 공간을 서로 다른 논리적인 단위 크기인 세그멘테이션으로 나눠 메모리에 적재하는 메모리 관리 방법입니다.

동작 방식
- 세그먼트는 논리 단위로 code 영역, data 영역, stack 영역 등으로 나눠 관리하도록 할 수 있고 또 다른 방식으로도 나눌 수 있습니다. (procedure, object, method 단위 등등...)
- 세그먼트 테이블을 둬서 각 세그먼트 번호, offset(물리 메모리 시작주소), limit(세그먼트 크기) 정보를 저장하고 이를 통해 메모리를 관리합니다.

장단점
- 장점
	- 세그먼트는 물리적 메모리 영역 상에서 연속적으로 위치할 필요가 없고 고정된 크기의 영역에 할당되는 것도 아니기 때문에 내부 단편화 현상을 해결할 수 있습니다.
	- 세그먼트 크기는 동적으로 조정될 수 있어, 프로그램 실행 중에 데이터 크기가 변하더라도 효율적으로 메모리를 사용할 수 있습니다.
- 단점
	- 서로 다른 크기의 세그먼트들이 메모리에 적재되고 제거되는 것이 반복되다 보면 외부 단편화 현상이 발생할 수 있습니다.


Paging VS Segmentation

세그멘테이션 기법은 접근 권한 관리와 공유 측면에서 페이징 기법보다 더 낫습니다. 

- 접근 권한 관리 측면 : 세그멘테이션 기법은 프로세스가 사용할 메모리 영역을 논리적인 단위로 나누기 때문에 해당 영역에 대한 접근 권한 비트를 설정하기 편합니다. 페이징 기법은 물리적인 단위로 나누기 때문에 논리적인 경계가 섞일 수 있어 이러한 비트 설정이 까다로워질 수 있습니다. 

- 공유 측면 : 페이징 기법에서는 프로세스 메모리 사용 영역을 물리적인 단위로 나누기 때문에 논리적인 단위로 공유가 쉽지 않다는 문제가 있습니다. 반면 세그멘테이션 기법을 사용할 때 이러한 측면에서 좀 더 효율적으로 공유가 가능합니다.










