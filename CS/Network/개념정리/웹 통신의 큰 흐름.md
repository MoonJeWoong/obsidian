
우리가 브라우저 주소창에 특정 URL을 입력하면 어떤 일이 발생하나요?

### In 브라우저

- URL에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 그 의미를 조사합니다.
- 조사된 의미에 따라 실제로 전송할 HTTP Request 메세지를 만들게 됩니다.
- 만들어진 메세지를 웹 서버로 전송합니다.

이 때 만들어진 메세지 전송은 브라우저가 직접하는 것이 아니라 네트워크 송출 기능을 수행할 수 있는 OS(프로토콜 스택)에 의뢰하여 메세지를 전달하게 됩니다. OS에 HTTP Request 메세지 전송을 요청할 때는 도메인 이름이 아니라 ip 주소로 메세지 수신자를 지정해야 하는데 이 과정에서 DNS 서버를 조회하게 됩니다.


### In 프로토콜 스택, LAN 라우터

- 프로토콜 스택(운영체제에 내장된 네트워크 제어용 소프트웨어)이 브라우저로부터 메세지를 받습니다.
- 브라우저로부터 받은 메세지를 패킷 속에 저장합니다.
- 수신처 주소 등의 제어 정보를 덧붙입니다. 
- 패킷을 LAN 어댑터에게 넘깁니다.
- LAN 어댑터는 다음 Hopt의 MAC 주소를 붙인 프레임을 전기신호로 변환합니다.
- 전기 신호를 LAN 케이블에 송출시킨다.

프로토콜 스택은 통신 중 오류가 발생했을 때 이 제어 정보를 사용하여 고쳐 보내거나, 각종 상황을 조절하는 등 다양한 역할을 하게 됩니다. 


### In 액세스 회선, 프로바이더

- 패킷은 인터넷의 입구에 있는 액세스 회선에 의해 POP(Point Of Presence, 통신사용 라우터)까지 운반됩니다.
- POP를 거쳐서 인터넷의 핵심부에 들어가게 됩니다.
- 수 많은 고속 라우터들을 거치며 목적지를 향해 전송됩니다.


### In 방화벽, 캐시서버

- 패킷은 인터넷 핵심부를 통과하여 웹 서버측의 LAN에 도착합니다.
- 서버측 방화벽이 도착한 패킷을 검사합니다.
- 이후 웹서버까지 정말 가야만 하는지 판단하는 캐시서버를 거친 뒤 본 서버에 도착하게 됩니다.


### In 웹 서버
- 패킷이 물리적인 웹 서버에 도착하면 웹 서버의 프로토콜 스택은 패킷을 추출하여 메세지를 복원하고 웹 서버 애플리케이션에게 넘깁니다.
- 메세지를 수신한 웹 서버 애플리케이션은 요청 메세지에 따른 데이터를 응답 메세지에 넣어 클라이언트로 회송합니다.
- 메세지가 전송해온 방식 그대로 다시 응답 메세지가 클라이언트에게 전달됩니다.