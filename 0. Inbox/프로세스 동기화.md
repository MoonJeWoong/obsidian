
# 정의 

- 프로세스 동기화는 멀티프로세스 환경에서 여러 프로세스가 같은 자원에 접근하거나, 서로의 실행 순서를 조정하기 위해 필요한 메커니즘입니다. 프로세스 동기화를 통해 데이터의 일관성을 유지하고, 프로세스들 간의 상호작용을 올바르게 처리할 수 있습니다.

# 임계영역 (Critical Section)

- 멀티 프로세스 환경에서 여러 프로세스가 하나의 자원(공유 변수, 공유 파일 등)에 동시에 접근하는 코드 영역을 임계 영역이라고 부릅니다.


# 임계영역 문제 (Critical Section Problem)

- 여러 프로세스들이 동시에 임계 영역을 접근할 때 발생할 수 있는 문제들을 의미합니다.

- 상호 배제 문제 (Mutual Exclusion)
	- 하나의 프로세스가 임계 영역에서 실행되고 있을 때 다른 프로세스가 임계 영역에서 실행될 수 있다면 임계영역에서 다루는 데이터를 동시에 수정하게 되므로 프로세스의 작업의 일관성이 보장될 수 없습니다. 
- 진행 문제 (Progress)
	- 임계 영역에서 수행되고 있는 프로세스가 없음에도 대기중인 프로세스가 임계영역에 들어설 수 없다면 어떤 프로세스도 임계 영역에 들어갈 수 없습니다.
- 한정된 대기 문제 (Bounded Waiting)
	- 임계 영역에 들어가기 위해 대기하는 프로세스의 대기 시간이 한정되어 있지 않다면 기아상태에 빠질 수 있습니다. 


이러한 문제들이 해결될 때 임계 영역 문제를 해결할 수 있습니다.
- 상호 배제 (Mutual Exclusion) : 임계 영역에서 한 프로세스가 실행중이라면 다른 프로세스는 임계 영역에 접근할 수 없어 대기해야 합니다.
- 진행 (Progress) : 임계 영역에 진행중인 프로세스가 없다면, 다른 프로세들은 임계 영역에 진입할 수 있어야 합니다.
- 한정된 대기 (Bounded Waiting) : 임계 영역에 진입하기 위해 대기하는 프로세스들의 대기 시간은 한정되어 있어야 합니다.


# 임계 영역 문제의 해결책들

### Mutex Lock

- Mutual Exclusive Lock의 줄임말로 임계 영역에 진입할 수 있는 프로세스의 수를 1로 제한하고 Lock을 획득한 프로세스만 임계 영역에 진입하도록 하고 나머지 프로세스는 Lock을 획득할 때까지 대기하도록 하는 방식입니다.
- 동작 방식
	- Lock 획득
	- 임계영역 실행 
	- Lcok 반환
- 발생할 수 있는 문제들
	- 데드락
	- 기아 상태
	- 재진입 문제 (Reentrant Problem)


### Semaphores

- 소프트웨어에서 임계 영역 문제를 해결하기 위한 동기화 도구

- Semaphore 종류
	- Counting Semaphore
		- 동시 접근 가능한 공유 자원의 개수를 파악해서 해당 개수만큼의 프로세스만 임계영역에 진입할 수 있도록 하는 동기화 도구.
		- 프로세스가 자원을 점유하면 -, 자원을 방출하면 +
	- Binary Semaphore
		- 공유자원에 동시에 접근할 수 있는 프로세스는 오직 한 개로만 제한하는 동기화 도구
		- MUTEX라고 불리기도 함.

- 문제점
	- Busy Waiting
		- 초기 Semaphore 에서는 임계 영역에 진입하기 위해 대기하는 과정에서 진입 코드를 반복적으로 수행하며 대기해야 하는 방식으로 구현되었습니다. 이는 CPU 점유 시간을 낭비하며 비효율적인 CPU 사용 문제를 야기했습니다.
		- 현재에 이르러서는 프로세스가 Semaphore에 접근해서 임계 영역 접근에 실패했을 때 해당 프로세스를 Block 시킨 뒤, 임계 영역에 빈자리가 생기면 다시 깨우는 방식으로 구현해 Busy Waiting 문제를 해결했습니다.

	- 데드락
		- Semaphore가 보유하고 있는 Ready Queue에 둘 이상의 프로세스가 임계 영역 진입을 대기하고 있고, 임계 영역에서 실행중인 프로세스는 Ready Queue의 프로세스가 수행되어야 탈출할 수 있는 상황을 지칭합니다.


### Monitor

- 모니터는 세마포어를 실제로 구현한 프로그램입니다.
- 모니터는 여러 개의 프로세스들이 접근하는 공유 자원을 할당하는데 사용됩니다.
- 데이터 및 프로시저를 포함하는 병행성 구조입니다.
	- 병행성 구조란 하나의 프로세스가 독점하는 것이 아니라 여러 프로세스가 병행적으로 처리할 수 있도록 하는 구조를 말합니다.
- 공유 자원에 접근하고 싶은 프로세스는 모니터 내부의 프로시저 함수를 통해 접근할 수 있습니다.
- 한 프로세스가 모니터 내부의 프로시저를 이용해 공유 자원에 접근하게 되면 다른 프로세스들은 모니터 내 프로시저들을 호출할 수 없고 공유자원에 접근이 불가능하게 되어 대기큐에서 대기하게 됩니다. 


특징 (https://yonghwankim-dev.tistory.com/323)
- 모니터 내 정의된 프로시저만을 통해서만 공유 자원에 접근이 가능합니다. 
- 모니터는 항상 모니터 내에 하나의 프로세스만 활성화되도록 해서 상호 배제 조건을 만족시킵니다.
- 프로그래머들은 동기화 제약 조건을 세마포어처럼 명시적으로 구현할 필요가 없습니다.
















